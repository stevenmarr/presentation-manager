{% extends "main.html" %}
{% block maincontent %}
<script>$(document).ready(function(){$('#loading-icon').hide();$('#warning').hide();$('#button').click(function(){$('#loading-icon').show();$('#upload-icon').hide();$('#warning').show();});});</script>
</div>
</div>
<!-- End Header -->

<!-- Container -->
<div id="container" >
  <div class="shell"> 
       <!-- Message OK -->   
    {% if success %}
    <div class="msg msg-ok">
      <p><strong>{{ message}}</strong></p>
    </div>
    {% endif %}
    <!-- End Message OK -->   
     <!-- Message Error -->
    <div id = "warning">
    <div class="msg msg-error">
      <p><strong>Upload in progress do not navigate away from this page</strong></p>
    </div>
    </div>
    <!-- End Message Error -->

    <br />

    <!-- Main -->
    <div id="main">
    <div class="cl">&nbsp;</div>
        <!-- Content -->
        <div id="content">
          
          <!-- Box -->
          <div class="box">

            <!-- Box Head -->
            <div class="box-head">
              <h2 class="left">{{user.firstname}}'s Presentations</h2>
            </div>
            <!-- End Box Head --> 
             
            <!-- Table -->
            <div class="presentation-table">
              <table width="100%" border="0" cellspacing="0" cellpadding="0">
                
                <tr>
                  <th width="450px">Session Name</th>
                  <th width = "80px" class="ac">Session Date</th>
                  <th width ="40px" class="ac">Current Presentation</th>
                  <th width ="40px" class="ac">Delete Presentation</th>
                  <th width ="40px" class="ac">Upload Presentation</th>
                <th></th>
                </tr>
                {% for session in sessions %}
                
                <tr>
                  <td>{{session.session_name}}</td>
                  <td>{{session.session_date}}</td>
                
                <!-- Link to current presentation if it exists -->
                {% if session.blob_store_key == None %}
                    <td class="ac">--</td>
                {% else %}
                  <td class="ac" >
                    <a href = "{{'/serve/%s' % session.blob_store_key.key()}}"><img src = "/img/open-file-icon.png" width="20" height ="20" alt = "Open file"></a>
                  
                  </td>
                {% endif %}
                <!--****************************-->
                <!-- Delete presentation -->
                {% if session.blob_store_key == None %}
                    <td class="ac">--</td>
                {% else %}
                    <td class="ac">
                      <form action="{{'/delete/%s' % session.blob_store_key.key()}}" method="POST">
                        <input type="hidden" name="session_key" value="{{session.key()}}">
                        <input type="image" src="/img/delete-icon.png" name="submit" alt="Submit" width="20" height="20"/>
                      </form>
                    </td>
                {% endif %}
                <!--****************************-->
                <!-- Upload presentation -->
                 <td class="ac">
                      <form action="{{upload_url}}" method="POST" enctype="multipart/form-data">
                        <input type="hidden" name="session_key" value="{{session.key()}}">
                        <input type="hidden" name="blob_store_key" value="{{session.blob_store_key}}">
                        <input type="file" name="file" class = "button" value="upload file"/>

                 </td>
                 <td class="ac">       
                        <div id = "upload-icon"><input type="image" src="/img/upload-icon.png" id="button" name="submit" alt="Submit" width="20" height="20"/></div>
                        <div id = "loading-icon"><img src="/img/small-loading.gif" width="20" height="20"/></div>
                      </form>
                </td>
                <td>
                  
                </td>
                </tr>
                {% endfor %}
                  </table>

                </div>
                </div>
              <!-- End content -->
              <div class="cl">&nbsp;</div>      
              </div>
          <!-- Main -->
            </div>
             <!-- End Shell -->
          </div>

        <!-- End Container -->
      

 {% endblock %}